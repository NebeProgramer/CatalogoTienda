<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo - Login con Google</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <!-- Modal de inicio de sesión (ejemplo de estructura) -->
    <div id="modalSesion" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="opcionTitulo">Iniciar Sesión</h2>
            
            <!-- NUEVA SECCIÓN: Google OAuth -->
            <div class="google-auth-section">
                <div id="google-login-container">
                    <!-- El botón de Google se creará aquí dinámicamente -->
                </div>
                <div class="login-separator">O</div>
            </div>
            
            <!-- Formulario tradicional existente -->
            <form id="formSesion" class="form-sesion-container">
                <div class="input-group">
                    <label for="emailSesion">Correo electrónico:</label>
                    <input type="email" id="emailSesion" required>
                </div>
                
                <div class="input-group" id="emailConfirmContainer" style="display: none;">
                    <label for="emailSesionC">Confirmar correo:</label>
                    <input type="email" id="emailSesionC">
                </div>
                
                <div class="input-group">
                    <label for="passwordSesion">Contraseña:</label>
                    <input type="password" id="passwordSesion" required>
                </div>
                
                <div class="input-group" id="passwordConfirmContainer" style="display: none;">
                    <label for="passwordSesionC">Confirmar contraseña:</label>
                    <input type="password" id="passwordSesionC">
                </div>
                
                <!-- Requisitos de contraseña -->
                <div id="requisitosContainer" style="display: none;">
                    <p>La contraseña debe cumplir:</p>
                    <ul>
                        <li id="reqLength">Al menos 8 caracteres</li>
                        <li id="reqMayus">Una letra mayúscula</li>
                        <li id="reqMinus">Una letra minúscula</li>
                        <li id="reqNum">Un número</li>
                        <li id="reqEspecial">Un carácter especial</li>
                    </ul>
                </div>
                
                <button type="submit" id="btnSesion">Iniciar Sesión</button>
                
                <div id="olvidoContainer" style="display: none;">
                    <a href="#" id="olvidoContrasena">¿Olvidaste tu contraseña?</a>
                </div>
            </form>
            
            <div class="modal-footer">
                <p id="switchText">¿No tienes cuenta? 
                    <a href="#" id="switchMode">Crear cuenta</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/loaders.js"></script>
    <script src="/js/Sesion.js"></script>
    
    <script>
        // Inicialización del modal y botón de Google
        document.addEventListener('DOMContentLoaded', function() {
            // Crear el botón de Google
            const googleContainer = document.getElementById('google-login-container');
            if (googleContainer && typeof crearBotonGoogle === 'function') {
                crearBotonGoogle(googleContainer);
            }
            
            // Configurar eventos del modal (tu código existente)
            const modal = document.getElementById('modalSesion');
            const openBtn = document.getElementById('iniciarSesion');
            const closeBtn = document.querySelector('.close');
            
            if (openBtn) {
                openBtn.addEventListener('click', () => {
                    modal.style.display = 'block';
                });
            }
            
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    modal.style.display = 'none';
                });
            }
            
            // Verificar si el usuario viene de Google OAuth
            verificarParametrosGoogle();
            
            // Verificar si ya hay una sesión activa
            usuarioActivo(Swal, mostrarLoader, ocultarLoader);
        });
        
        // Funciones de loader (simplificadas para el ejemplo)
        function mostrarLoader() {
            console.log('Mostrando loader...');
        }
        
        function ocultarLoader() {
            console.log('Ocultando loader...');
        }
    </script>
</body>
</html>
